<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>ACD-2 Card Dealing Unit</title>
    <script type="module">
        import { BlackjackGameWithUi } from "./blackjack.js";
        import { Validate } from './validator.js';
        var game = new BlackjackGameWithUi();
        function validateGame() {
            const outcome = Validate(game.chuState());
            if (outcome.success) {
                alert("Congratulations! " + outcome.msg);
            } 
            document.getElementById('validation_state').value = outcome.msg;
            document.getElementById('validation_state_wrapper').style.visibility = 'visible';
        }

        window.onload = function () { 
            document.getElementById('validate_button').onclick = validateGame;
            game.render(); 
        };
    </script>
</head>

<body>
    <h2>ACD-2 Card Dealer</h2>
    <h3><a href="https://docs.google.com/document/d/1w_JfY6w8Ijv_93B2lgAcALdwrYuBmG41uD4CvHUNMiw/edit">User Manual</a>
    </h3>
    <button type="button" id="edit_button">Run Mode</button>
    <button type="button" id="next_button" disabled>Next</button>
    <button type="button" id="reset_button" disabled>Reset</button>
    <button type="button" id="run_button" disabled>Run</button>
    <button type="button" id="validate_button" disabled>Validate</button>
    <table>
        <tr>
            <td>
                <pre>



          +-----------
          |
          |
          |
          |
          |
          |
          v</pre>
            </td>
            <td id="control_container"></td>
            <td>
                <pre>



-------------+
             |
             |
             |
             |
             |
             |
             v</pre>
            </td>
            <td rowspan="2">
                <div id="validation_state_wrapper" style="visibility:collapse;">
                    Validation Results:<br>
                    <textarea id="validation_state" readonly rows="30" cols="40" ></textarea>
                </div>
            </td>
        </tr>
        <tr>
            <td id="ch1_container"></td>
            <td>
                <pre>

<-------------------->


</pre>
            </td>
            <td id="ch2_container"></td>
        </tr>
    </table>
    <br>
    <table>
        <tr>
            <td>Dealer Cards: </td>
            <td><input id="dealer_cards" readonly size="20"></input></td>
        </tr>
        <tr>
            <td>Player Cards: </td>
            <td><input id="player_cards" readonly size="20"></input></td>
        </tr>
        <tr>
            <td>Game State:</td>
            <td><textarea id="blackjack_state" readonly rows="10" cols="40"></textarea></td>
        </tr>
    </table>
    <div id="rules">
        <h3>Blackjack <a href="https://bicyclecards.com/how-to-play/blackjack/">Rules</a>:</h3>
        <ul>
            <li>The first card dealt to each player is face-up. The second is face down</li>
            <li>After two cards are dealt to all players, the non-dealer players may hit or stand. When they have
                finished, the dealer will hit or stand</li>
            <li>The <b>Dealer</b> will hit on 16 or lower and stand on 17 or higher</li>
            <li>If the dealer is showing a 7, 8, 9, 10, or Ace, the whale will hit until their total is 17 or higher
            </li>
            <li>If the dealer is showing a 2, 3, 4, 5, or 6, the whale will hit until their total is 12 or higher</li>
        </ul>
    </div>
</body>

</html>